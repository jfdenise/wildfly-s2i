# Overrides basic functionality by looking for settings.xml in <source>/configuration
# The side effect is to not update the /home/jboss/.m2/settings.xml that could break slim startup due to MODULES-405
# This hook can be removed when MODULES-405 is fixed.
function maven_init_var_MAVEN_SETTINGS_XML() {
  if [ -f "${MAVEN_SETTINGS_XML}" ]; then
    :
  elif [ -f "${S2I_SOURCE_DIR}/configuration/settings.xml" ]; then
    MAVEN_SETTINGS_XML="${S2I_SOURCE_DIR}/configuration/settings.xml"
  else
    MAVEN_SETTINGS_XML="${_MAVEN_S2I_SETTINGS_XML}"
    mkdir -p $(dirname "${MAVEN_SETTINGS_XML}")
    cp "${JBOSS_CONTAINER_MAVEN_DEFAULT_MODULE}/jboss-settings.xml" "${MAVEN_SETTINGS_XML}"
  fi
}
